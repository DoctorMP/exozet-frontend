var formValidator={messages:{nameError:"Please enter a correct name",emailError:"The E-Mail address you provided is invalid",phoneError:"Provided phone number is invalid. Phone number should contain digits only",commentError:"The comment must be longer than 0 and shorter than 500 characters"},validateForm:function(formData){var errors=[];return this.validateName(formData.get("name"))||errors.push(this.messages.nameError),this.validateEmail(formData.get("email"))||errors.push(this.messages.emailError),this.validatePhone(formData.get("phone"))||errors.push(this.messages.phoneError),this.validateComment(formData.get("comment"))||errors.push(this.messages.commentError),errors},validateName:function(value){var pattern=/^[a-zA-Z ]+$/;return value&&pattern.test(value)},validateEmail:function(value){var pattern=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return value=value.toLowerCase(),value&&pattern.test(value)},validatePhone:function(value){var pattern=/^[0-9]+$/;return!value||pattern.test(value)},validateComment:function(value){return value&&value.length<=500}},formHandler={formEl:{},button:{},url:"",initialize:function(element){this.formEl=element,this.button=this.formEl.querySelector("button"),this.url=this.formEl.getAttribute("action"),this.addEventListeners()},blockSubmitButton:function(){this.button.oldText=this.button.innerText,this.button.addEventListener("click",this.blockClicking),this.button.innerText="Sending..."},unblockSubmitButton:function(){this.button.innerText=this.button.oldText,this.button.removeEventListener("click",this.blockClicking)},blockClicking:function(event){event.preventDefault()},cleanUpMessages:function(){var oldInfo=document.getElementById("form-result-info");oldInfo&&this.formEl.removeChild(oldInfo)},createResultMessage:function(messageText,error){var messageClass=error?"form-error":"form-info",messageNode=document.createElement("p");return messageNode.setAttribute("id","form-result-info"),messageNode.classList.add(messageClass),messageNode.innerHTML=messageText,messageNode},clearForm:function(){this.formEl.reset()},addEventListeners:function(){this.formEl.addEventListener("submit",this.onFormSubmit),this.formEl.querySelector("#comment").addEventListener("change",this.onTextChange)},onFormSubmit:function(event){event.preventDefault();var formData=new FormData(event.target);formHandler.blockSubmitButton(),formHandler.cleanUpMessages();var errors=formValidator.validateForm(formData);if(errors.length){var errMessages=errors.join("<br />"),errMessageNode=formHandler.createResultMessage(errMessages,!0);formHandler.formEl.insertBefore(errMessageNode,formHandler.formEl.querySelector(".form-field")),formHandler.unblockSubmitButton()}else{var request=new XMLHttpRequest;request.addEventListener("load",function(){var messageNode=formHandler.createResultMessage("Comment added successfully",!1);formHandler.formEl.appendChild(messageNode),formHandler.unblockSubmitButton(),formHandler.clearForm()}),request.addEventListener("error",function(){var messageNode=formHandler.createResultMessage("Something went wrong",!0);formHandler.formEl.appendChild(messageNode),formHandler.unblockSubmitButton()}),request.open("POST",formHandler.url),request.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),request.send(formData)}},onTextChange:function(event){var field=event.target;field.setAttribute("value",field.innerText)}},form=document.querySelector(".comment-form");formHandler.initialize(form);